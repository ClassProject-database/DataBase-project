-- Create the database and switch to it
CREATE DATABASE IF NOT EXISTS movie_rental;
USE movie_rental;

-- 1. Genres Table
CREATE TABLE Genres (
  genre_id INT AUTO_INCREMENT PRIMARY KEY,
  genre_name VARCHAR(50) NOT NULL
);

-- 2. Movies Table
CREATE TABLE Movies (
  movie_id INT AUTO_INCREMENT PRIMARY KEY,
  title VARCHAR(100) NOT NULL,
  year INT,
  rating VARCHAR(10),
  price DECIMAL(5,2),
  genre_id INT,
  FOREIGN KEY (genre_id) REFERENCES Genres(genre_id)
);

-- 3. Logins Table (for user authentication)
CREATE TABLE Logins (
  login_id INT AUTO_INCREMENT PRIMARY KEY,
  username VARCHAR(50) NOT NULL UNIQUE,
  password VARCHAR(255) NOT NULL  -- It is recommended to store hashed passwords
);

-- 4. Customers Table
CREATE TABLE Customers (
  customer_id INT AUTO_INCREMENT PRIMARY KEY,
  first_name VARCHAR(50),
  last_name VARCHAR(50),
  email VARCHAR(100) UNIQUE,
  phone VARCHAR(15),
  login_id INT,
  FOREIGN KEY (login_id) REFERENCES Logins(login_id)
);

-- 5. Rentals Table (tracks movie rentals by customers)
CREATE TABLE Rentals (
  rental_id INT AUTO_INCREMENT PRIMARY KEY,
  customer_id INT,
  movie_id INT,
  rental_date DATE,
  return_date DATE,
  FOREIGN KEY (customer_id) REFERENCES Customers(customer_id),
  FOREIGN KEY (movie_id) REFERENCES Movies(movie_id)
);

-- 6. Reviews Table (optional, additional relation for customer feedback)
CREATE TABLE Reviews (
  review_id INT AUTO_INCREMENT PRIMARY KEY,
  movie_id INT,
  customer_id INT,
  review_date DATE,
  rating TINYINT,  -- e.g., scale of 1 to 5 stars
  comment TEXT,
  FOREIGN KEY (movie_id) REFERENCES Movies(movie_id),
  FOREIGN KEY (customer_id) REFERENCES Customers(customer_id)
);
INSERT INTO Genres (genre_name) VALUES
('Sci-Fi'),         -- should get genre_id = 1
('Action'),         -- should get genre_id = 2
('Animation'),      -- should get genre_id = 3
('Romance'),        -- should get genre_id = 4
('Adventure'),      -- should get genre_id = 5
('Fantasy'),        -- should get genre_id = 6
('Drama');          -- should get genre_id = 7
update Genres set genre_name = 'Family' where genre_id = 3;

INSERT INTO Movies (title, year, rating, price, genre_id,image) VALUES
('Harry Potter and the Deathly Hallows_2', 2015, 'PG-13', 3.99, 6),
('Interstellar', 2014, 'PG-13', 3.99, 1),
('The Matrix', 1999, 'R', 2.99, 1),
('The Matrix Reloaded', 2003, 'R', 2.99, 1),
('The Dark Knight', 2008, 'PG-13', 3.99, 2),
('Inception', 2010, 'PG-13', 3.99, 1),
('Frozen', 2013, 'PG', 3.99, 3),
('50 First Dates', 2004, 'PG-13', 2.99, 4),
('Holes', 2003, 'PG', 2.99, 5),
('Harry Potter and the Sorcerer''s Stone', 2001, 'PG', 3.99, 6),
('Harry Potter and the Chamber of Secrets', 2002, 'PG', 3.99, 6),
('Harry Potter and the Prisoner of Azkaban', 2004, 'PG', 3.99, 6),
('Harry Potter and the Goblet of Fire', 2005, 'PG-13', 3.99, 6),
('Harry Potter and the Order of the Phoenix', 2007, 'PG-13', 3.99, 6),
('Harry Potter and the Half-Blood Prince', 2009, 'PG-13', 3.99, 6),
('Harry Potter and the Deathly Hallows', 2010, 'PG-13', 3.99, 6),
('Harry Potter and the Deathly Hallows', 2010, 'PG-13', 3.99, 6),
('Forrest Gump', 1994, 'PG-13', 2.99, 7),
('Spongebob the Movie', 2004, 'PG', 2.99, 3),
('Tangled', 2010, 'PG', 3.99, 3),
('Despicable Me', 2010, 'PG', 3.99, 3),
('Avatar', 2009, 'PG-13', 3.99, 1);

INSERT INTO Logins (username, password) VALUES
('jsmith', 'hashed_password1'),
('jdoe', 'hashed_password2'),
('awilliams', 'hashed_password3'),
('mbrown', 'hashed_password4'),
('ljohnson', 'hashed_password5');
INSERT INTO Customers (first_name, last_name, email, phone, login_id) VALUES
('John', 'Smith', 'john.smith@example.com', '1234567890', 1),
('Jane', 'Doe', 'jane.doe@example.com', '2345678901', 2),
('Alice', 'Williams', 'alice.williams@example.com', '3456789012', 3),
('Michael', 'Brown', 'michael.brown@example.com', '4567890123', 4),
('Linda', 'Johnson', 'linda.johnson@example.com', '5678901234', 5);
  

UPDATE Movies SET image = 'interstellar.jpg' WHERE movie_id = 1;
UPDATE Movies SET image = 'the_matrix.jpg' WHERE movie_id = 2;
UPDATE Movies SET image = 'the_dark_knight.jpg' WHERE movie_id = 3;
UPDATE Movies SET image = 'inception.jpg' WHERE movie_id = 4;
UPDATE Movies SET image = 'the_matrix_reloaded.jpg' WHERE movie_id = 5;
UPDATE Movies SET image = 'frozen.jpg' WHERE movie_id = 6;
UPDATE Movies SET image = '50_first_dates.jpg' WHERE movie_id = 7;
UPDATE Movies SET image = 'holes.jpg' WHERE movie_id = 8;
UPDATE Movies SET image = 'harry_potter_sorcerers_stone.jpg' WHERE movie_id = 9;
UPDATE Movies SET image = 'harry_potter_chamber.jpg' WHERE movie_id = 10;
UPDATE Movies SET image = 'harry_potter_prisoner.jpg' WHERE movie_id = 11;
UPDATE Movies SET image = 'harry_potter_goblet.jpg' WHERE movie_id = 12;
UPDATE Movies SET image = 'harry_potter_order.jpg' WHERE movie_id = 13;
UPDATE Movies SET image = 'harry_potter_half_blood.jpg' WHERE movie_id = 14;
UPDATE Movies SET image = 'harry_potter_deathly_hallows_1.jpg' WHERE movie_id = 15;
UPDATE Movies SET image = 'harry_potter_deathly_hallows_2.jpg' WHERE movie_id = 16;
UPDATE Movies SET image = 'forest_gump.jpg' WHERE movie_id = 17;
UPDATE Movies SET image = 'spongebob_movie.jpg' WHERE movie_id = 18;
UPDATE Movies SET image = 'tangled.jpg' WHERE movie_id = 19;
UPDATE Movies SET image = 'despicable_me.jpg' WHERE movie_id = 20;
UPDATE Movies SET image = 'avatar.jpg' WHERE movie_id = 21;
